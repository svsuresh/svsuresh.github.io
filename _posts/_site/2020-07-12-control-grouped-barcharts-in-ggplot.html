<div zoompage-fontsize="16">ggplot2 has become <i zoompage-fontsize="16">defacto</i> standard in R for plotting. It is easy to produce basic plots as web is full of them. But for better control, one has to trawl through manuals, forums and numerous spam pages to get the right answer. Today, let us control the order of bars in bar plot using ggplot. Our dataset is iris. I understand that offlate, iris data set has become sensitive to use. If you do not want to use iris data, you can use mtcars data. Concepts remain the same</div><div zoompage-fontsize="16">================================================================</div><div zoompage-fontsize="16">## View the data<br /></div>library(DT)<br />DT:::datatable(iris)<br /><div zoompage-fontsize="16">## load the libraries<br /></div>data(iris)<br />library(ggplot2)<br />suppressPackageStartupMessages(library(dplyr))<br />library(forcats)<br /><div zoompage-fontsize="16">library(tidyr)</div><div zoompage-fontsize="16">============================================================<br /></div><div zoompage-fontsize="16">Now let us do the basic plotting. We would be converting data frame (iris) from wide format (5 columns by 50 rows) into long format with three columns: Species, Type (Sepal, Petal etc) and corresponding measurement values for each type.</div><div zoompage-fontsize="16">=================================================================<br /></div><div zoompage-fontsize="16">## Let us do the plotting<br /></div><div zoompage-fontsize="16">iris %&gt;%</div>&nbsp;&nbsp;&nbsp; pivot_longer(-Species,&nbsp; names_to ="Type",values_to ="Value") %&gt;%<br />&nbsp;&nbsp;&nbsp; ggplot(aes(Species, Value, fill = Type, group=Type)) +<br />&nbsp;&nbsp;&nbsp; geom_bar(position = "dodge", stat = "identity", width = 0.7) +<br /><div zoompage-fontsize="16">&nbsp;&nbsp;&nbsp; theme_bw() <br /></div><div zoompage-fontsize="16">===============================================================</div><div zoompage-fontsize="16">Plot looks like this:</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-6kybuPVyWIA/XwocparasiI/AAAAAAAABd4/E330gR9cjVw7fS9LC-9Q_tok37hGosTMgCLcBGAsYHQ/s480/fig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="384" data-original-width="480" height="512" src="https://1.bp.blogspot.com/-6kybuPVyWIA/XwocparasiI/AAAAAAAABd4/E330gR9cjVw7fS9LC-9Q_tok37hGosTMgCLcBGAsYHQ/w640-h512/fig.png" width="640" /></a></div><div zoompage-fontsize="16"><br /></div><div zoompage-fontsize="16"><br /></div>If one looks at the graph, user can see that bars are drawn as per legend. Let us say we would like to change the order of plotting. We want to draw Sepal.Length, followed by Petal.Length (Lengths first), Sepal.Width, Petal.Width (widths last).<br /><div>===============================================<br /></div><div>iris %&gt;%<br /></div><div>pivot_longer(-Species,&nbsp; names_to ="Type",values_to ="Value") %&gt;%<br /></div><div>mutate_at(c("Type","Species"), as.factor)%&gt;%<br /></div><div>mutate(Type=fct_relevel(Type,"Sepal.Length","Petal.Length","Sepal.Width","Petal.Width"))%&gt;%<br /></div>ggplot(aes(Species, Value, fill = Type, group=Type)) +<br />geom_bar(position = "dodge", stat = "identity", width = 0.7) +<br /><div>theme_bw() <br /></div><div>==================================================</div><div>plot looks like this:</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-DkPFVZcMcis/Xwodje31fyI/AAAAAAAABeA/Bjl51qjxESweLqbzqpG8G8XfyR4GOJivgCLcBGAsYHQ/s480/fig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="384" data-original-width="480" height="512" src="https://1.bp.blogspot.com/-DkPFVZcMcis/Xwodje31fyI/AAAAAAAABeA/Bjl51qjxESweLqbzqpG8G8XfyR4GOJivgCLcBGAsYHQ/w640-h512/fig.png" width="640" /></a></div><div>Now that we plotted, inside bars as per our choice, let us do another exercise. This time, we want within each species, we would like to plot the bars in increasing value order. ggplot plots the group as per the order of the grouping variable. Since, neither species nor type (sepal, petal category) doesnâ€™t give any information, we need to create a column to control the order of bars in the figure. For each category within each species, we take mean. Types will be drawn in the order of their means in increasing order, by default.</div><div>=========================================================<br /></div><div>iris %&gt;%<br />&nbsp;&nbsp;&nbsp; pivot_longer(-Species,&nbsp; names_to ="Type",values_to ="Value") %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate_at(c("Type","Species"), as.factor) %&gt;%<br />&nbsp;&nbsp;&nbsp; group_by(Species,Type) %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate(mean=mean(Value))%&gt;%<br />&nbsp;&nbsp;&nbsp; ggplot(aes(Species,Value, group=mean,fill = Type)) +<br />&nbsp;&nbsp;&nbsp; geom_bar(position="dodge", stat = "identity", width = 0.7 ) +<br />&nbsp;&nbsp;&nbsp; theme_bw()</div><div>========================================================</div><div>image looks like this:</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-DZrEBUJRDx0/Xwod8Gqom_I/AAAAAAAABeI/dYSjkARslRY5e_xL9uf0RJun-6X9JFUAQCLcBGAsYHQ/s480/fig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="384" data-original-width="480" height="512" src="https://1.bp.blogspot.com/-DZrEBUJRDx0/Xwod8Gqom_I/AAAAAAAABeI/dYSjkARslRY5e_xL9uf0RJun-6X9JFUAQCLcBGAsYHQ/w640-h512/fig.png" width="640" /></a></div><div>What if we want in decreasing order?</div><div>========================================================<br /></div><div>iris %&gt;%<br />&nbsp;&nbsp;&nbsp; pivot_longer(-Species,&nbsp; names_to ="Type",values_to ="Value") %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate_at(c("Type","Species"), as.factor) %&gt;%<br />&nbsp;&nbsp;&nbsp; group_by(Species,Type) %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate(mean=mean(Value))%&gt;%<br />&nbsp;&nbsp;&nbsp; ggplot(aes(Species,Value, group=desc(mean),fill = Type)) +<br />&nbsp;&nbsp;&nbsp; geom_bar(position="dodge", stat = "identity", width = 0.7 ) +<br />&nbsp;&nbsp;&nbsp; theme_bw() <br /></div><div>=======================================================</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-PzG5jjKvOBM/XwoedBE2VpI/AAAAAAAABeQ/Yw0GYmFH7A0842vJGeVJN1dgMwYIaUCYwCLcBGAsYHQ/s480/fig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="384" data-original-width="480" height="512" src="https://1.bp.blogspot.com/-PzG5jjKvOBM/XwoedBE2VpI/AAAAAAAABeQ/Yw0GYmFH7A0842vJGeVJN1dgMwYIaUCYwCLcBGAsYHQ/w640-h512/fig.png" width="640" /></a></div><div>What if we want the bars to be separated from each other?</div><div>==========================================================</div><div>iris %&gt;%<br />&nbsp;&nbsp;&nbsp; pivot_longer(-Species,&nbsp; names_to ="Type",values_to ="Value") %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate_at(c("Type","Species"), as.factor) %&gt;%<br />&nbsp;&nbsp;&nbsp; group_by(Species,Type) %&gt;%<br />&nbsp;&nbsp;&nbsp; mutate(mean=mean(Value))%&gt;%<br />&nbsp;&nbsp;&nbsp; ggplot(aes(Species,Value, group=desc(mean),fill = Type)) +<br />&nbsp;&nbsp;&nbsp; geom_bar(position=position_dodge(width = 0.8), stat = "identity", width = 0.7) +<br />&nbsp;&nbsp;&nbsp; theme_bw() <br /></div><div>=========================================================</div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-DKyszzYczB8/Xwoe2tiyh1I/AAAAAAAABeY/22uU3iUDWa0nW-teG4bsO76GLn0Ee8gpACLcBGAsYHQ/s480/fig.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="384" data-original-width="480" height="512" src="https://1.bp.blogspot.com/-DKyszzYczB8/Xwoe2tiyh1I/AAAAAAAABeY/22uU3iUDWa0nW-teG4bsO76GLn0Ee8gpACLcBGAsYHQ/w640-h512/fig.png" width="640" /></a></div><div><br /></div><div><br /></div><div><br /></div>